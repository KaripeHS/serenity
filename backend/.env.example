# Serenity ERP Backend - Environment Variables
# Copy this file to .env and fill in the values

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Node environment (development | production | test)
NODE_ENV=development

# API server port
PORT=3000

# Allowed CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3001,http://localhost:3002,http://localhost:3003

# Frontend URL (for password reset emails)
FRONTEND_URL=http://localhost:3001

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection string
DATABASE_URL=postgresql://username:password@localhost:5432/serenity_erp

# Database pool configuration
DB_POOL_MIN=2
DB_POOL_MAX=10

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT secret key (CHANGE THIS IN PRODUCTION - use a long random string)
JWT_SECRET=serenity-erp-secret-key-change-in-production-use-openssl-rand-base64-32

# JWT token expiration
JWT_EXPIRES_IN=8h

# Refresh token expiration
REFRESH_TOKEN_EXPIRES_IN=7d

# Bcrypt salt rounds (10-12 recommended)
BCRYPT_SALT_ROUNDS=10

# =============================================================================
# SANDATA ALT-EVV INTEGRATION
# =============================================================================

# Sandata environment (sandbox | production)
SANDATA_ENVIRONMENT=sandbox

# Sandata API base URL
# Sandbox: https://api-sandbox.sandata.com/evv/v4
# Production: https://api.sandata.com/evv/v4
SANDATA_API_URL=https://api-sandbox.sandata.com/evv/v4

# Sandata API Key (obtained from Sandata portal)
SANDATA_API_KEY=your-api-key-here

# Sandata Provider ID (assigned by Sandata)
SANDATA_PROVIDER_ID=your-provider-id

# Sandata request timeout (milliseconds)
SANDATA_TIMEOUT=30000

# Sandata retry attempts
SANDATA_RETRY_ATTEMPTS=3

# =============================================================================
# REDIS CONFIGURATION (for Bull queue & session storage)
# =============================================================================

# Redis connection URL
REDIS_URL=redis://localhost:6379

# Redis password (if required)
REDIS_PASSWORD=

# Redis database number
REDIS_DB=0

# =============================================================================
# EMAIL CONFIGURATION (for password resets, notifications)
# =============================================================================

# Email provider (sendgrid | ses | smtp)
EMAIL_PROVIDER=smtp

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# SendGrid API Key (if using SendGrid)
SENDGRID_API_KEY=

# AWS SES Configuration (if using SES)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# From email address
EMAIL_FROM=noreply@serenitycarepartners.com
EMAIL_FROM_NAME=Serenity Care Partners

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (debug | info | warn | error)
LOG_LEVEL=info

# Log format (json | pretty)
LOG_FORMAT=pretty

# Enable request logging
LOG_REQUESTS=true

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limit window (milliseconds)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per window (default endpoints)
RATE_LIMIT_MAX=100

# Max requests for public endpoints
RATE_LIMIT_PUBLIC_MAX=300

# Max requests for auth endpoints
RATE_LIMIT_AUTH_MAX=5

# =============================================================================
# FILE UPLOADS
# =============================================================================

# Upload directory
UPLOAD_DIR=./uploads

# Max file size (bytes) - 10MB default
MAX_FILE_SIZE=10485760

# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# =============================================================================
# FEATURE FLAGS (can also be managed via Admin UI)
# =============================================================================

# Enable claims gate (block claims without Sandata ACK)
FEATURE_CLAIMS_GATE_ENABLED=false

# Enable Sandata sandbox mode
FEATURE_SANDATA_SANDBOX_ENABLED=true

# Enable morning check-in notifications
FEATURE_MORNING_CHECKIN_NOTIFICATIONS=true

# Enable automatic Sandata sync
FEATURE_AUTO_SANDATA_SYNC=false

# =============================================================================
# MONITORING & ANALYTICS
# =============================================================================

# Sentry DSN (for error tracking)
SENTRY_DSN=

# Enable performance monitoring
SENTRY_ENABLE_TRACING=false

# Sample rate for tracing (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1

# Google Analytics tracking ID
GA_TRACKING_ID=

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Enable debug mode
DEBUG=false

# Enable SQL query logging
LOG_SQL_QUERIES=false

# Enable mock data seeding on startup
AUTO_SEED_DATA=false

# Test database URL (for running tests)
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/serenity_erp_test

# =============================================================================
# OHIO MEDICAID SPECIFIC
# =============================================================================

# Ohio Medicaid API endpoints (if needed)
OHIO_MEDICAID_API_URL=

# Ohio Medicaid provider number
OHIO_MEDICAID_PROVIDER_NUMBER=

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# S3 bucket for backups
S3_BACKUP_BUCKET=

# Backup schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *

# Retention period (days)
BACKUP_RETENTION_DAYS=30
